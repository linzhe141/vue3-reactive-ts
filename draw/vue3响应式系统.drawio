<mxfile host="65bd71144e">
    <diagram id="QqUA3UKoJoLK8TZRrcnE" name="cleanUp">
        <mxGraphModel dx="2459" dy="2303" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="1920" background="none" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="14" value="" style="edgeStyle=none;html=1;" parent="1" source="2" target="13" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;reactiveWeakMap&lt;br&gt;:&amp;lt;object,Map&amp;gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1160" y="-1690" width="130" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="" style="edgeStyle=none;html=1;" parent="1" source="13" target="15" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1105" y="-1570" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1050" y="-1570" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="" style="edgeStyle=none;html=1;" parent="1" source="17" target="19" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="obj:Map&amp;lt;key,Set&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1045" y="-1580" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="" style="edgeStyle=none;html=1;" parent="1" source="19" target="22" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="" style="edgeStyle=none;html=1;" parent="1" source="19" target="32" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-990" y="-1480" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="22" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-1480" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="" style="edgeStyle=none;html=1;" parent="1" source="24" target="25" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="24" value="flag:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-1490" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="25" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-755" y="-1480" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="&amp;nbsp; effect(render).deps.push(flag:set)&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-745" y="-1490" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="" style="edgeStyle=none;html=1;" parent="1" source="35" target="36" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="36" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-755" y="-1400" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="&amp;nbsp; effect(render).deps.push(x:set)" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-745" y="-1410" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="48" value="" style="edgeStyle=none;html=1;endArrow=none;startArrow=none;" parent="1" source="32" target="35" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-980" y="-1390" as="sourcePoint"/>
                        <mxPoint x="-825" y="-1330" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="35" value="x:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-1410" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="49" value="" style="edgeStyle=none;html=1;endArrow=none;" parent="1" target="32" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-980" y="-1390" as="sourcePoint"/>
                        <mxPoint x="-935" y="-1385.2631578947369" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="32" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-990" y="-1400" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="50" value="flag:set" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-685" y="-1520" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="51" value="&lt;span style=&quot;color: rgb(240, 240, 240); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(42, 37, 47); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;x:set&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-675" y="-1440" width="70" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;当flag为true时,那effect(render).deps[&amp;nbsp; flag:set,&amp;nbsp; x:set&amp;nbsp; ],当flag改为false时，effect(render)，&lt;br&gt;重新执行,先进行cleanUp(this)&amp;nbsp; &amp;nbsp;this-&amp;gt; effect(render),就会在&lt;br&gt;[ flag:set, x:set ].forEach(dep=&amp;gt;dep.delete(effect(render)) )， 同步再effect(render).deps = []，&lt;br&gt;现在就把依赖删完了，然后在重新执行，重新收集新的依赖&lt;br&gt;&lt;br&gt;&lt;/font&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#ce9178;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="-795" y="-1340" width="770" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-77" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;render&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;document&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;body&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;innerHTML&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;`&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&amp;nbsp; &amp;nbsp; xxxxxxxxxxxxxxxx---&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;${&lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;flag&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; ? &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;x&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; : &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;y&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&amp;nbsp; `&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;});&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;color: rgb(79, 193, 255);&quot;&gt;obj.flag = false&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1145" y="-1880" width="430" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-78" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-79" target="zwIZ1mU6FWZU_X9J-iuH-81" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-79" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;reactiveWeakMap&lt;br&gt;:&amp;lt;object,Map&amp;gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1145" y="-1080" width="130" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-80" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-81" target="zwIZ1mU6FWZU_X9J-iuH-82" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-81" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1090" y="-960" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-82" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1035" y="-960" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-83" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-84" target="zwIZ1mU6FWZU_X9J-iuH-87" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-84" value="obj:Map&amp;lt;key,Set&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1030" y="-970" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-85" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-87" target="zwIZ1mU6FWZU_X9J-iuH-88" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-86" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-87" target="zwIZ1mU6FWZU_X9J-iuH-99" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-87" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-975" y="-870" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-88" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-920" y="-870" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-89" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-90" target="zwIZ1mU6FWZU_X9J-iuH-91" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-90" value="flag:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-920" y="-880" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-91" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-740" y="-870" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-92" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-730" y="-880" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-93" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-97" target="zwIZ1mU6FWZU_X9J-iuH-94" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-94" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-740" y="-790" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-95" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-730" y="-800" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-96" value="" style="edgeStyle=none;html=1;endArrow=none;startArrow=none;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-99" target="zwIZ1mU6FWZU_X9J-iuH-97" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-965" y="-780" as="sourcePoint"/>
                        <mxPoint x="-810" y="-720" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-97" value="x:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-920" y="-800" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-98" value="" style="edgeStyle=none;html=1;endArrow=none;" parent="1" target="zwIZ1mU6FWZU_X9J-iuH-99" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-965" y="-780" as="sourcePoint"/>
                        <mxPoint x="-920" y="-775.2631578947369" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-99" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-975" y="-790" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-100" value="flag:set" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-670" y="-910" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-101" value="&lt;span style=&quot;color: rgb(240, 240, 240); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(42, 37, 47); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;x:set&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-660" y="-830" width="70" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-104" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;cleanUp&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;: &lt;/span&gt;&lt;span style=&quot;color: #4ec9b0;&quot;&gt;ReactiveEffect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;) {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;deps&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;deps&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #c586c0;&quot;&gt;for&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; (&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;let&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #b5cea8;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;deps&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;length&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;++) {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;dep&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;deps&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;i&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;];&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;dep&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;delete&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;deps&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;length&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #b5cea8;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontColor=#ce9178;" parent="1" vertex="1">
                    <mxGeometry x="-1155" y="-1360" width="360" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-105" value="执行完cleanup后的状态" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontColor=#ce9178;fontSize=28;" parent="1" vertex="1">
                    <mxGeometry x="-1160" y="-1140" width="440" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-107" value="重新执行effect(render)在进行新的依赖收集" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontColor=#ce9178;fontSize=28;" parent="1" vertex="1">
                    <mxGeometry x="-1160" y="-710" width="625" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-130" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-131" target="zwIZ1mU6FWZU_X9J-iuH-133" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-131" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;reactiveWeakMap&lt;br&gt;:&amp;lt;object,Map&amp;gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1135" y="-640" width="130" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-132" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-133" target="zwIZ1mU6FWZU_X9J-iuH-134" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-133" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1080" y="-520" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-134" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1025" y="-520" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-135" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-136" target="zwIZ1mU6FWZU_X9J-iuH-139" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-136" value="obj:Map&amp;lt;key,Set&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1020" y="-530" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-137" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-139" target="zwIZ1mU6FWZU_X9J-iuH-140" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-138" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-139" target="zwIZ1mU6FWZU_X9J-iuH-151" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-139" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-965" y="-430" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-140" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-910" y="-430" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-141" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-142" target="zwIZ1mU6FWZU_X9J-iuH-143" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-142" value="flag:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-910" y="-440" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-143" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-730" y="-430" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-144" value="&amp;nbsp; effect(render).deps.push(flag:set)&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-720" y="-440" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-145" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-149" target="zwIZ1mU6FWZU_X9J-iuH-146" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-146" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-730" y="-350" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-147" value="" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-720" y="-360" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-148" value="" style="edgeStyle=none;html=1;endArrow=none;startArrow=none;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-151" target="zwIZ1mU6FWZU_X9J-iuH-149" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-955" y="-340" as="sourcePoint"/>
                        <mxPoint x="-800" y="-280" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-149" value="x:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-910" y="-360" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-150" value="" style="edgeStyle=none;html=1;endArrow=none;" parent="1" target="zwIZ1mU6FWZU_X9J-iuH-151" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="-955" y="-340" as="sourcePoint"/>
                        <mxPoint x="-910" y="-335.2631578947369" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-159" value="" style="edgeStyle=none;html=1;fontSize=28;fontColor=#ce9178;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-151" target="zwIZ1mU6FWZU_X9J-iuH-158" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-151" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-965" y="-350" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-152" value="flag:set" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-660" y="-470" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-153" value="&lt;span style=&quot;color: rgb(240, 240, 240); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(42, 37, 47); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;x:set&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-650" y="-390" width="70" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-154" value="" style="edgeStyle=none;html=1;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-157" target="zwIZ1mU6FWZU_X9J-iuH-155" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-155" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-730" y="-260" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-156" value="&amp;nbsp; effect(render).deps.push(y:set)" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-720" y="-270" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-157" value="y:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-910" y="-270" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-160" value="" style="edgeStyle=none;html=1;fontSize=28;fontColor=#ce9178;" parent="1" source="zwIZ1mU6FWZU_X9J-iuH-158" target="zwIZ1mU6FWZU_X9J-iuH-157" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-158" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-965" y="-260" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-161" value="&lt;span style=&quot;color: rgb(240, 240, 240); font-family: Helvetica; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(42, 37, 47); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;&quot;&gt;y:set&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-655" y="-300" width="70" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="zwIZ1mU6FWZU_X9J-iuH-162" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;重新执行effect(render)后，新的依赖如图，effect(render).deps[&amp;nbsp; flag:set,&amp;nbsp; y:set&amp;nbsp; ]，现在修改obj.x 也不好重新触发依赖了&lt;br&gt;&lt;/font&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#ce9178;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="-1135" y="-160" width="770" height="80" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="-xSVKLs3MYySExx0PCAc" name="嵌套effect">
        <mxGraphModel dx="2459" dy="2303" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="1920" background="none" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="xENKaew4TxXI40Y0BK7q-1" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;parentRender&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: rgb(86, 156, 214);&quot;&gt;function &lt;/span&gt;&lt;span style=&quot;color: rgb(220, 220, 170);&quot;&gt;sonRender&lt;/span&gt;() {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;console&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;log&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;'类比--子组件'&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;foo&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; });&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;console&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;log&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;'&lt;/span&gt;&lt;span style=&quot;color: rgb(206, 145, 120);&quot;&gt;类比&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;--父组件'&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;foo&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1175" y="-1880" width="340" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-1" value="" style="edgeStyle=none;html=1;" parent="1" source="49vU_hiHRDK_Eq5kKuAL-2" target="49vU_hiHRDK_Eq5kKuAL-4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-2" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;reactiveWeakMap&lt;br&gt;:&amp;lt;object,Map&amp;gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1160" y="-1580" width="130" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-3" value="" style="edgeStyle=none;html=1;" parent="1" source="49vU_hiHRDK_Eq5kKuAL-4" target="49vU_hiHRDK_Eq5kKuAL-5" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-4" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1105" y="-1460" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-5" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1050" y="-1460" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-6" value="" style="edgeStyle=none;html=1;" parent="1" source="49vU_hiHRDK_Eq5kKuAL-7" target="49vU_hiHRDK_Eq5kKuAL-10" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-7" value="obj:Map&amp;lt;key,Set&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1045" y="-1470" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-8" value="" style="edgeStyle=none;html=1;" parent="1" source="49vU_hiHRDK_Eq5kKuAL-10" target="49vU_hiHRDK_Eq5kKuAL-11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-10" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-990" y="-1370" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-11" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-1370" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-12" value="" style="edgeStyle=none;html=1;" parent="1" source="49vU_hiHRDK_Eq5kKuAL-13" target="49vU_hiHRDK_Eq5kKuAL-14" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-13" value="foo:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-1380" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-14" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-755" y="-1370" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-15" value="&amp;nbsp;effect(sonRender)&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-745" y="-1380" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="49vU_hiHRDK_Eq5kKuAL-23" value="flag:set" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-685" y="-1410" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-1" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;run&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;activeEffect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;fn&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #c586c0;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-790" y="-1870" width="250" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-2" value="error" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#c70f0f;fontSize=24;" parent="1" vertex="1">
                    <mxGeometry x="-640" y="-1800" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-3" value="&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;执行过程&lt;br&gt;1、首先执行parentRender，activeEffect = effect(parentRender)&lt;br&gt;2、里面嵌套了sonRender，再执行sonRender,&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;activeEffect = effect(sonRender)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp;sonRender对obj.foo进行了取值操作，进行依赖收集,然后执行完成，退出sonRender函数&lt;br&gt;3、回到parentRender中，对obj.foo进行取值，&lt;/span&gt;&lt;font color=&quot;#ff3333&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;但现在的&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;activeEffect还是effect(sonRender)&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&lt;font color=&quot;#ff3333&quot;&gt;&amp;nbsp; &amp;nbsp;所以这次的依赖收集，就无法收集到parentRender了&lt;/font&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;font color=&quot;#4fc1ff&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="text;strokeColor=none;align=left;fillColor=#18141D;html=1;verticalAlign=top;whiteSpace=wrap;rounded=0;fontColor=#c70f0f;labelBackgroundColor=none;" parent="1" vertex="1">
                    <mxGeometry x="-1165" y="-1750" width="650" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-4" value="ERROR依赖收集" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontColor=#C70F0F;fontSize=23;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-1560" width="190" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-5" value="&lt;div style=&quot;color: rgb(212, 212, 212); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;div style=&quot;line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;effectStack&lt;/span&gt;: &lt;span style=&quot;color: #4ec9b0;&quot;&gt;ReactiveEffect&lt;/span&gt;[] = [];&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;run&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;cleanUp&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;activeEffect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;effectStack&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;push&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;activeEffect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #6a9955;&quot;&gt;// 执行这个函数,就会取值进行依赖收集&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;this&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;fn&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;effectStack&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;pop&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;activeEffect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; = &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;effectStack&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;[&lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;effectStack&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;length&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; - &lt;/span&gt;&lt;span style=&quot;color: #b5cea8;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;];&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #c586c0;&quot;&gt;return&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt; &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; }&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontSize=23;fontColor=#C70F0F;labelBackgroundColor=default;" parent="1" vertex="1">
                    <mxGeometry x="-750" y="-1270" width="460" height="210" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-6" value="success" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=default;fontSize=25;fontColor=#66FF66;" parent="1" vertex="1">
                    <mxGeometry x="-490" y="-1100" width="190" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-7" value="" style="edgeStyle=none;html=1;" parent="1" source="wARFNjz0NRBSaDVGHuBX-8" target="wARFNjz0NRBSaDVGHuBX-10" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-8" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;reactiveWeakMap&lt;br&gt;:&amp;lt;object,Map&amp;gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1160" y="-830" width="130" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-9" value="" style="edgeStyle=none;html=1;" parent="1" source="wARFNjz0NRBSaDVGHuBX-10" target="wARFNjz0NRBSaDVGHuBX-11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-10" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1105" y="-710" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-11" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-1050" y="-710" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-12" value="" style="edgeStyle=none;html=1;" parent="1" source="wARFNjz0NRBSaDVGHuBX-13" target="wARFNjz0NRBSaDVGHuBX-15" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-13" value="obj:Map&amp;lt;key,Set&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1045" y="-720" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-14" value="" style="edgeStyle=none;html=1;" parent="1" source="wARFNjz0NRBSaDVGHuBX-15" target="wARFNjz0NRBSaDVGHuBX-16" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-15" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-990" y="-620" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-16" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-620" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-17" value="" style="edgeStyle=none;html=1;" parent="1" source="wARFNjz0NRBSaDVGHuBX-18" target="wARFNjz0NRBSaDVGHuBX-19" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-18" value="foo:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-630" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-19" value="" style="shape=waypoint;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-755" y="-620" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-20" value="&amp;nbsp;effect(sonRender)，&amp;nbsp;&lt;font color=&quot;#66ff66&quot;&gt;effect(parentRender)&lt;br&gt;&lt;/font&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="-745" y="-630" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-21" value="flag:set" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-685" y="-660" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-22" value="SUCCESS依赖收集" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fontColor=#33FF33;fontSize=23;" parent="1" vertex="1">
                    <mxGeometry x="-935" y="-810" width="225" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-23" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-weight: normal; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;function&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;parentRender&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;() {&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;effect&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: rgb(86, 156, 214);&quot;&gt;function &lt;/span&gt;&lt;span style=&quot;color: rgb(220, 220, 170);&quot;&gt;sonRender&lt;/span&gt;() {&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;console&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;log&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;'类比--子组件'&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;foo&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; });&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;console&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;log&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;(&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;'&lt;/span&gt;&lt;span style=&quot;color: rgb(206, 145, 120);&quot;&gt;类比&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;--父组件'&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;, &lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;.&lt;/span&gt;&lt;span style=&quot;color: #9cdcfe;&quot;&gt;foo&lt;/span&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;);&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #d4d4d4;&quot;&gt;});&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-1190" y="-1270" width="340" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="wARFNjz0NRBSaDVGHuBX-24" value="&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;执行过程&lt;br&gt;1、首先执行parentRender，&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&lt;font color=&quot;#66ff66&quot;&gt;activeEffect = effect(parentRender)&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt; &amp;nbsp; &lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&lt;font color=&quot;#66ff66&quot;&gt;effectStack[effect(parentRender)]&lt;/font&gt;&lt;br&gt;&lt;font color=&quot;#4fc1ff&quot;&gt;2、里面嵌套了sonRender，再执行sonRender,&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&lt;font color=&quot;#66ff66&quot;&gt;activeEffect = effect(sonRender)&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;font color=&quot;#66ff66&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp;effectStack[effect(parentRender),&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;effect(sonRender)&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;]&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp;sonRender对obj.foo进行了取值操作，进行依赖收集,然后执行完成，退出sonRender函数&amp;nbsp;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;font color=&quot;#66ff66&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;effectStack[effect(parentRender)]&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;activeEffect = effect(&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;parentRender&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&lt;br&gt;3、回到parentRender中，对obj.foo进行取值, 现在activeEffect 还是effect(parentRender),进行依赖收集，&lt;br&gt;&amp;nbsp; &amp;nbsp;obj.foo，就能收集到&lt;/span&gt;&lt;span style=&quot;color: rgb(79, 193, 255); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;effect(parentRender)了&lt;/span&gt;&lt;span style=&quot;font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px;&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;font color=&quot;#4fc1ff&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="text;align=left;html=1;verticalAlign=top;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;fillColor=#18141D;fillStyle=auto;gradientColor=none;" parent="1" vertex="1">
                    <mxGeometry x="-1175" y="-1030" width="1015" height="150" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="pClICHGAKTiFDUmAE_DP" name="computed">
        <mxGraphModel dx="1259" dy="383" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="4681" pageHeight="3300" background="none" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-1" value="" style="edgeStyle=none;html=1;" parent="1" source="nrW7GNdE7zMcmXtHyab3-2" target="nrW7GNdE7zMcmXtHyab3-4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-2" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;reactiveWeakMap&lt;br&gt;:&amp;lt;object,Map&amp;gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="25" y="320" width="130" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-3" value="" style="edgeStyle=none;html=1;" parent="1" source="nrW7GNdE7zMcmXtHyab3-4" target="nrW7GNdE7zMcmXtHyab3-5" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-43" value="" style="edgeStyle=none;html=1;" parent="1" source="nrW7GNdE7zMcmXtHyab3-4" target="nrW7GNdE7zMcmXtHyab3-42" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-4" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="80" y="450" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-5" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="120" y="450" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-6" value="" style="edgeStyle=none;html=1;" parent="1" source="nrW7GNdE7zMcmXtHyab3-7" target="nrW7GNdE7zMcmXtHyab3-10" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-7" value="obj:Map&amp;lt;key,Set&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="140" y="440" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-8" value="" style="edgeStyle=none;html=1;" parent="1" source="nrW7GNdE7zMcmXtHyab3-10" target="nrW7GNdE7zMcmXtHyab3-11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-10" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="195" y="555" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-11" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="260" y="555" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-12" value="" style="edgeStyle=none;html=1;" parent="1" source="nrW7GNdE7zMcmXtHyab3-13" target="nrW7GNdE7zMcmXtHyab3-14" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-13" value="foo:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="270" y="545" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-14" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="430" y="555" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-15" value="&amp;nbsp; effect(render), effect(double:scheduler)" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="440" y="545" width="250" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-21" value="" style="edgeStyle=none;html=1;endArrow=none;" parent="1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="205" y="330" as="sourcePoint"/>
                        <mxPoint x="205" y="330" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-23" value="key:set" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="440" y="510" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-47" value="" style="edgeStyle=none;html=1;" parent="1" source="nrW7GNdE7zMcmXtHyab3-31" target="nrW7GNdE7zMcmXtHyab3-46" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-31" value="double: computed" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="370" y="260" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-32" value="" style="edgeStyle=none;html=1;exitX=0.431;exitY=1.025;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="nrW7GNdE7zMcmXtHyab3-33" target="nrW7GNdE7zMcmXtHyab3-35" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-33" value="double:Map&amp;lt;key,Set&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="150" y="610" width="130" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-34" value="" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nrW7GNdE7zMcmXtHyab3-35" target="nrW7GNdE7zMcmXtHyab3-38" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-35" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="195" y="725" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-36" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="270" y="725" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-37" value="" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="nrW7GNdE7zMcmXtHyab3-38" target="nrW7GNdE7zMcmXtHyab3-40" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-38" value="value:key" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="270" y="715" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-39" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="440" y="725" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-40" value="&amp;nbsp; effect(render)" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="440" y="715" width="230" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-41" value="key:set" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="450" y="680" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-44" value="" style="edgeStyle=none;html=1;" parent="1" source="nrW7GNdE7zMcmXtHyab3-42" target="nrW7GNdE7zMcmXtHyab3-33" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-42" value="" style="shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=default;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="80" y="620" width="20" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-46" value="&amp;nbsp; getter:()=&amp;gt;{&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; console.log('computed')&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; return obj.foo * 2&lt;br&gt;&amp;nbsp; }&lt;br&gt;&amp;nbsp; scheduler(){&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; this.dirty = true&lt;br&gt;&amp;nbsp; }" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
                    <mxGeometry x="550" y="212.5" width="150" height="135" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-49" value="&lt;div style=&quot;background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;当执行obj.foo = 123时,执行render,依次执行effect(render)和effect(double:scheduler)&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;1、render&lt;br&gt;再进行依赖收集，但由于set去重，也加不进去，这一次对double.value取值，dirty还是false&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;所以这一次的double.value 还是2&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;2、double:scheduler&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;dirty变为true，手动trigger(double[compoted],'value'),effect(render)重新执行&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;当对double.value 取值时&lt;/font&gt;&lt;span style=&quot;color: rgb(78, 201, 176);&quot;&gt;这一次的double.dirty = true，重新取值getter为246，然后dirty&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;span style=&quot;color: rgb(78, 201, 176);&quot;&gt;又变成false&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left; background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;font color=&quot;#4ec9b0&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
                    <mxGeometry x="55" y="755" width="630" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="nrW7GNdE7zMcmXtHyab3-51" value="&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: &amp;quot;JetBranis Mono&amp;quot;, Consolas, &amp;quot;Courier New&amp;quot;, monospace, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;double&lt;/span&gt; = &lt;span style=&quot;color: #dcdcaa;&quot;&gt;computed&lt;/span&gt;(() &lt;span style=&quot;color: #569cd6;&quot;&gt;=&amp;gt;&lt;/span&gt; {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #c586c0;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;foo&lt;/span&gt; * &lt;span style=&quot;color: #b5cea8;&quot;&gt;2&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;});&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #dcdcaa;&quot;&gt;effect&lt;/span&gt;(&lt;span style=&quot;color: #569cd6;&quot;&gt;function&lt;/span&gt; &lt;span style=&quot;color: #dcdcaa;&quot;&gt;render&lt;/span&gt;() {&lt;/div&gt;&lt;div&gt;&amp;nbsp; &lt;span style=&quot;color: #9cdcfe;&quot;&gt;document&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;body&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;innerHTML&lt;/span&gt; = &lt;span style=&quot;color: #ce9178;&quot;&gt;`&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;lt;div&amp;gt;foo:&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;${&lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;obj&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;foo&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;}&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;lt;div&amp;gt;compued:douobulefoo---&amp;gt;&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;${&lt;/span&gt;&lt;span style=&quot;color: #4fc1ff;&quot;&gt;double&lt;/span&gt;.&lt;span style=&quot;color: #9cdcfe;&quot;&gt;value&lt;/span&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;}&lt;/span&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: #ce9178;&quot;&gt;&amp;nbsp; `&lt;/span&gt;;&lt;/div&gt;&lt;div&gt;});&lt;/div&gt;&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="35" y="90" width="455" height="30" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>